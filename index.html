<html>
<body>

<form>
  <label for="textinput1">Text input:</label><br>
  <input type="text" id="txtinput1" name="textbox1"><br>
</form>
<button id="myButton1">Click me</button>
<br>
<br>

<script type="importmap">
  {
    "imports": {
      "@google/generative-ai": "https://esm.run/@google/generative-ai"
    }
  }
</script>

<script type="module">

console.log("Initialized")

// const API_KEY = "AIzaSyCEAH5KQZnbBVi1YhwUShvi5uBIzwIHtso";

console.log("Starting")

import { GoogleGenerativeAI } from "@google/generative-ai";

console.log("Import Finished")

const genAI = new GoogleGenerativeAI("AIzaSyCEAH5KQZnbBVi1YhwUShvi5uBIzwIHtso");

console.log("Defined")

const model = genAI.getGenerativeModel({ model: "gemini-1.5-flash" });

console.log("Model loaded")

document.getElementById("myButton1").addEventListener("click", function() {
  
  const userInput = document.getElementById("txtinput1").value
  const prompt = "Hello, how are you doing?";
  
  console.log("Prompt loaded")

  document.body.innerHTML += "<br> STARTED <br>";
  
  const result = await model.generateContent(userInput);
  
  console.log("Finished");
  
  console.log(result.response.text());
  
  document.body.innerHTML += result.response.text();
  
  document.body.innerHTML += "<br> <br>"
});

</script>

<script>
</script>

</body>
</html>
