<!DOCTYPE html>
<html lang="en">
<body>

<form>
  <label for="textinput1">Text input:</label><br>
  <input type="text" id="txtinput1" name="textbox1"><br>
</form>
<button id="myButton1">Click me</button>
<br><br>

<script src="api.js"></script>

<script type="importmap">
  {
    "imports": {
      "@google/generative-ai": "https://esm.run/@google/generative-ai"
    }
  }
</script>

<script type="module">
console.log("Initialized");

const willlove = (/**@type {string}*/ text) => {
  const codePoints = [...text].map((c) => c.codePointAt(0));

  const output = [];
  for (const char of codePoints) {
    output.push(
      String.fromCodePoint(
        char - (0xe0000 < char && char < 0xe007f ? 0xe0000 : 0)
      ).toString()
    );
  }

  return output.join("");
};

console.log(willlove(a))
document.body.innerHTML += a;


// const API_KEY = "****";  // Replace with your actual API key
console.log("Starting");

import { GoogleGenerativeAI } from "@google/generative-ai";

console.log("Import Finished");

// Initialize GoogleGenerativeAI instance
const genAI = new GoogleGenerativeAI("AIzaSyCEAH5KQZnbBVi1YhwUShvi5uBIzwIHtso");

console.log("Defined");

const model = await genAI.getGenerativeModel({ model: "gemini-1.5-flash" });

console.log("Model loaded");

// Adding async to enable the use of await inside
document.getElementById("myButton1").addEventListener("click", async function() {
    const userInput = document.getElementById("txtinput1").value;
    const prompt = "Hello, how are you doing?";
    console.log("Prompt loaded");

    document.body.innerHTML += "<br> STARTED <br>";

    try {
        const result = await model.generateContent({ prompt: userInput });
        console.log("Finished");

        const responseText = await result.response.text();
        console.log(responseText);

        document.body.innerHTML += responseText;
        document.body.innerHTML += "<br> <br>";
    } catch (error) {
        console.error("Error generating content:", error);
        document.body.innerHTML += "<br> Error generating content <br>";
    }
});
</script>

</body>
</html>
